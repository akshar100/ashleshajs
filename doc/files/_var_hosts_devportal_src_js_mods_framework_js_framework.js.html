<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>&#x2F;var&#x2F;hosts&#x2F;devportal&#x2F;src&#x2F;js_mods&#x2F;framework&#x2F;js&#x2F;framework.js</title>
    <link rel="stylesheet" href="http:&#x2F;&#x2F;yui.yahooapis.com&#x2F;3.5.1&#x2F;build&#x2F;cssgrids&#x2F;cssgrids-min.css">
    <link rel="stylesheet" href="..&#x2F;assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="..&#x2F;assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" type="image/png" href="..&#x2F;assets/favicon.png">
    <script src="http:&#x2F;&#x2F;yui.yahooapis.com&#x2F;combo?3.5.1&#x2F;build&#x2F;yui&#x2F;yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            
                <h1><img src="..&#x2F;assets/css/logo.png" title=""></h1>
            
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: </em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
    <h2 class="off-left">APIs</h2>
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">Classes</a></li>
            <li><a href="#api-modules">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">
            
                <li><a href="..&#x2F;classes/AshleshaAuth.html">AshleshaAuth</a></li>
            
                <li><a href="..&#x2F;classes/AshleshaBaseModel.html">AshleshaBaseModel</a></li>
            
                <li><a href="..&#x2F;classes/AshleshaBaseView.html">AshleshaBaseView</a></li>
            
                <li><a href="..&#x2F;classes/AshleshaSideBarModel.html">AshleshaSideBarModel</a></li>
            
                <li><a href="..&#x2F;classes/AshleshaViewServer.html">AshleshaViewServer</a></li>
            
                <li><a href="..&#x2F;classes/CreateItemView.html">CreateItemView</a></li>
            
                <li><a href="..&#x2F;classes/HeroView.html">HeroView</a></li>
            
                <li><a href="..&#x2F;classes/HomeView.html">HomeView</a></li>
            
                <li><a href="..&#x2F;classes/MainMessageView.html">MainMessageView</a></li>
            
                <li><a href="..&#x2F;classes/PostsView.html">PostsView</a></li>
            
                <li><a href="..&#x2F;classes/RequestServer.html">RequestServer</a></li>
            
                <li><a href="..&#x2F;classes/SideBarView.html">SideBarView</a></li>
            
                <li><a href="..&#x2F;classes/TextAreaView.html">TextAreaView</a></li>
            
                <li><a href="..&#x2F;classes/TextBoxView.html">TextBoxView</a></li>
            
                <li><a href="..&#x2F;classes/ToolBarView.html">ToolBarView</a></li>
            
                <li><a href="..&#x2F;classes/TopBarView.html">TopBarView</a></li>
            
            </ul>

            <ul id="api-modules" class="apis modules">
            
                <li><a href="..&#x2F;modules/module-name.html">module-name</a></li>
            
            </ul>
        </div>
    </div>
</div>

            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
        Show:
        <label for="api-show-inherited">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </div>


            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1 class="file-heading">File: &#x2F;var&#x2F;hosts&#x2F;devportal&#x2F;src&#x2F;js_mods&#x2F;framework&#x2F;js&#x2F;framework.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
&#x2F;*jslint devel: true,  undef: true, newcap: true, strict: true, maxerr: 50 *&#x2F;
&#x2F;*global YUI*&#x2F;
&#x2F;*global jQuery*&#x2F;
&#x2F;*dev alert(&quot;debug version&quot;); *&#x2F;
&#x2F;**
 * The ashlesha-app is the module that loads all the neccessary infrastructure for the Ashlesha based web application
 * @module module-name
 *&#x2F;
YUI.add(&#x27;ashlesha-app&#x27;, function(Y) {
	&quot;use strict&quot;;
    &#x2F;&#x2F; handy constants and shortcuts used in the module
    var Lang = Y.Lang;

    &#x2F;**
     * The RequestServer provides the basic functionality of accepting requests and sending responses asynchronously.
     * This is a a classic Facade Design pattern.
     * To use do 
     * 
     *  	Y.mix(YourObj,Y.RequestServer);
     * 
     * @class RequestServer
     * @extends Base
     * @uses
     * @constructor
     * @cfg {object} configuration attributes
     *&#x2F;
    Y.RequestServer = function() {
        Y.RequestServer.superclass.constructor.apply(this, arguments);
    };

    Y.augment(Y.RequestServer, Y.EventTarget);
    Y.extend(Y.RequestServer, Y.Base, {
    	&#x2F;**
		* This method is to be used if your object acts as a server if you call
		* 
		* 	myobj.registerListener(&quot;pincode&quot;,function(e){
		* 		if(e.pincode &amp;&amp; e.pincode.length===6){
		* 			this.sendResponse(e,&quot;valid&quot;);
		*   	}
		* 		else{
		* 			this.sendResponse(e,&quot;invalid&quot;);
		* 		}
		* 	},this); 
		*
		* @method registerListener
		* @param {String} token_name is a string using which clients will send requests.
		* @param {Function} callback Will be called everytime a request is received. You might want to call this.sendResponse() to send response inside the callback
		* @return 
		*&#x2F;
        registerListener: function(keyword, listenerCallback, ctx) {
            Y.on(keyword + &quot;_request&quot;, function(e) {
                e.__keyword = keyword;
                listenerCallback.call(this, e); &#x2F;&#x2F; you should call this.sendResponse(e,response) inside this method else no response will be sent.
            }, ctx);
        },
        sendResponse: function(e, obj, broadcast) {
            var eventStr = e.__keyword + &quot;_response:&quot;;
            if (broadcast !== true) {
                Y.fire(eventStr + e.__token, obj); &#x2F;&#x2F;send only to the one who has requested
                return;
            }
            this.sendBroadcastResponse(e.__keyword, obj); &#x2F;&#x2F;send unsolicitated response to all the objects
        },
        sendRequest: function(keyword, request, responseCallback, ctx) {
            var eventStr = keyword + &quot;_response:&quot;;
            request = request || {}; &#x2F;&#x2F; if request is empty please create an empty object
            request.__token = Math.random();
            if (Lang.isFunction(responseCallback)) {
                Y.once(eventStr + request.__token, responseCallback, ctx);
            }

            Y.fire(keyword + &quot;_request&quot;, request);
        },
        sendBroadcastResponse: function(keyword, obj) {

            var eventStr = keyword + &quot;_response:*&quot;;
            Y.fire(eventStr, obj); &#x2F;&#x2F;send unsolicitated response to all the objects
        },
        receiveBroadcast: function(keyword, callback, ctx) {
            if (!Lang.isFunction(callback)) {

                throw new Error(&quot;Callback function not provided&quot;);
            }
            Y.on(keyword + &quot;_response:*&quot;, function(e) {
                callback.apply(ctx, [e]);
            });
        }


    });

    &#x2F;**
     * The AshleshaAuth Class holds the Current User Information. Depending the user presence and his rights other modules do async calls via Y.fire and Y.on
     * to perform their operations. This class must always be initialized synchronously before any other modules are initialized.
     * @class AshleshaAuth
     * @extends Y.Model
     * @uses WidgetParent
     * @constructor
     * @cfg {object} configuration attributes
     *&#x2F;
    Y.AshleshaAuth = Y.Base.create(&#x27;AshleshaAuth&#x27;, Y.Model, [Y.RequestServer], {
        sendAuthResponse: function(token, obj) {
            Y.fire(&quot;auth_response:&quot; + token, obj);
        },
        initializer: function() {
            this.registerListener(&quot;auth&quot;, function(e) {
                var model, user, self = this;
                if (this.get(&quot;user&quot;)) {
                    this.sendResponse(e, {
                        authenticated: true,
                        user: this.get(&quot;user&quot;)
                    });
                }
                else {

                    if (e.username || e.password) &#x2F;&#x2F;If someone is trying to attempt a login by providing Username and Password
                    {
                        model = new Y.AshleshaLoginModel({
                            username: e.username,
                            password: e.password
                        });
                        model.on(&quot;save&quot;, function(err) {


                            this.setUpAuthEnvironment(); &#x2F;&#x2F; Load the current user and let everyone know that
                        }, this);
                        model.on(&quot;error&quot;, function(errorEvent) {
                            this.sendResponse(e, {
                                authenticated: false,
                                &#x2F;&#x2F;tell the requester that his attempt succeeded and proceede to informing everyone
                                error: errorEvent.error &#x2F;&#x2F; actual error
                            });
                        }, this);
                        model.save();


                    }
                    else {
                        this.sendResponse(e, {
                            authenticated: false,
                            error: &#x27;Please provide both username and password&#x27;
                        });
                    }


                }

            }, this);
            this.on(&quot;change&quot;, function(e) {
                if (e.changed.user) {
                    if (e.changed.user.newVal === &quot;&quot;) {
                        this.sendBroadcastResponse(&quot;auth&quot;, {
                            authenticated: false
                        }); &#x2F;&#x2F;broadcast message
                    }
                    else {
                        this.sendBroadcastResponse(&quot;auth&quot;, {
                            authenticated: true,
                            user: this.get(&quot;user&quot;)
                        });
                    }
                }
            }, this);

            Y.on(&quot;auth_logout&quot;, function() {
                var user = this.get(&#x27;user&#x27;);
                if (user) {
                    this.set(&#x27;user&#x27;, &quot;&quot;);
                    user.destroy({
                        remove: true
                    });
                    Y.fire(&quot;navigate&quot;, {
                        action: &quot;&#x2F;&quot;
                    });
                }

            }, this);

        },
        setUpAuthEnvironment: function() {
            var user = new Y.AshleshaCurrentUserModel({
                _id: &#x27;current_user&#x27;
            }),
                self = this;
            user.load(function(err, response) {
                if (!err) {
                    self.set(&quot;user&quot;, user); &#x2F;&#x2F;the moment you set the user everyone is notified :)
                }
            });
        }


    }, {
        ATTRS: {
            user: {
                value: &quot;&quot;
            }
        }
    });

    &#x2F;**
     * AshleshaViewServer creates Views that are commonly used and keeps them in the DOM and serves them whenever requested
     * @class AshleshaViewServer
     * @extends Widget
     * @uses WidgetParent
     * @constructor
     * @cfg {object} configuration attributes
     *&#x2F;
    Y.AshleshaViewServer = Y.Base.create(&#x27;AshleshaViewServer&#x27;, Y.Model, [Y.RequestServer], {
        initializer: function() {
            this.registerListener(&quot;view&quot;, function(e) {
                var view = e.view;
                if (view) &#x2F;&#x2F;the view is either not provided or not loaded
                {
                    if (!this.get(view)) {

                        try {

                            if (Lang.isObject(Y[view])) {

                                this.set(view, new Y[view](e.config || {})); &#x2F;&#x2F;Create and Instance of the supplied view with the configuration provided
                            }
                        }
                        catch (ex) {
                            Y.log(ex);
                        }
                    }

                    this.sendResponse(e, {
                        view: this.get(view)
                    });
                } else {
                    throw new Error(&quot;The ViewServer received a request but no view name was provided&quot;);
                }

            }, this);

        }
    }, {
        ATTRS: {

        }
    });


    &#x2F;**
     * The AshleshaBaseView class is the base class for all Views. It dynamically loads the templates, stores them in localstorage if available,
     * it fetches the user if present and accordingly calls two functions. (authenticated or unauthenticated). If your view is agnostic to user
     * then please provide (&quot;useragnostic:true&quot;) as initialization parameter. The method to be specified in that case is altInitializer (Alternate Initializer)
     * All the child Modules hence need not bother about theme loading and user detection.
     * @class AshleshaBaseView
     * @extends View
     * @uses
     * @constructor
     * @cfg {userAgnostic:false} configuration attributes
     *&#x2F;
    Y.AshleshaBaseView = Y.Base.create(&#x27;AshleshaBaseView&#x27;, Y.View, [Y.RequestServer], {
        containerTemplate: &#x27;&lt;DIV&#x2F;&gt;&#x27;,
        initializer: function() {
            var request_token = Math.random(),
                c = this.get(&quot;container&quot;),
                cache = new Y.CacheOffline(),
                loader = Y.Node.create(&#x27;&lt;img src=&#x27; + Y.config.AppConfig.LOADER + &#x27; &#x2F;&gt;&#x27;);

            c.setHTML(loader);
            this.on(&quot;template_loaded&quot;, function() {
                if (this.get(&quot;userAgnostic&quot;)) {
                    this.altInitializer.apply(this, arguments);
                }
                else {

                    this.sendRequest(&quot;auth&quot;, {}, this.authChangeHandler, this);
                    this.receiveBroadcast(&quot;auth&quot;, this.authChangeHandler, this);
                }

            }, this);
            this.loadTemplate();

            this.on(&quot;wait:start&quot;, function(e) {
                var c = e.target.render().get(&#x27;container&#x27;),
                    region, overlay, body = Y.one(&quot;body&quot;);
                if (body.contains(c)) {
                    region = c.get(&quot;region&quot;);
                    overlay = Y.Node.create(&quot;&lt;div class=&#x27;wait-backdrop&#x27;&#x2F;&gt;&quot;);
                    overlay.setXY([region.left, region.top]);
                    overlay.setStyle(&quot;height&quot;, region.height + &quot;px&quot;);
                    overlay.setStyle(&quot;width&quot;, region.width + &quot;px&quot;);
                    overlay.append(loader);
                    c.append(overlay);
                }
            });
            this.on(&quot;wait:end&quot;, function(e) {
                var overlay, c = e.target.render().get(&#x27;container&#x27;);
                overlay = c.one(&#x27;.wait-backdrop&#x27;);
                overlay.remove(true);
            });
        },
        hasPermission: function(u) {
            var user = u || this.get(&quot;user&quot;),
                roles = this.get(&quot;roles&quot;);
            if (roles &amp;&amp; user) {
                Y.Array.each(roles, function(role) {
                    if (user.hasRole(role)) {
                        return true;
                    }
                });
                return false;
            }
            return true;

        },
        authChangeHandler: function(response) {
            var roles, user, permission_flag = false,
                c = this.get(&#x27;container&#x27;);

            if (response.authenticated) {
                this.set(&quot;user&quot;, response.user); &#x2F;&#x2F;set user for the use
                permission_flag = this.hasPermission();
                if (permission_flag) &#x2F;&#x2F;only if the user has persmission then execute this authenticated method
                {
                    this.authenticated.call(this, response.user);
                }
                else &#x2F;&#x2F;user does not have permission so simply hide the container
                {
                    c.addClass(&#x27;hide&#x27;);
                }

            }
            else {
                this.unauthenticated.call(this);
            }
        },
        loadTemplate: function() {
            var templateURL = Y.config.AppConfig.baseURL + Y.config.AppConfig.templateURL,
                cache = new Y.CacheOffline(),
                tl = this.get(&quot;templateName&quot;) || this.name;

            if (this.get(&#x27;template&#x27;)) {
                this.fire(&quot;template_loaded&quot;); &#x2F;&#x2F;If user has provided a template then dont bother to fetch it just return it
            }

            if (cache.retrieve(tl)) {
                this.set(&quot;template&quot;, Y.Node.create(cache.retrieve(tl).response));
                this.fire(&quot;template_loaded&quot;);
            }
            else {
                Y.io(templateURL, {
                    method: &#x27;POST&#x27;,
                    data: {
                        view: tl,
                        skin: Y.config.AppConfig.skin
                    },
                    context: this,
                    on: {
                        success: function(i, o, a) {

                            cache.add(tl, o.responseText + &quot;&lt;script type=&#x27;text&#x2F;x-template&#x27;&gt;&lt;&#x2F;script&gt;&quot;);

                            this.set(&quot;template&quot;, Y.Node.create(cache.retrieve(tl).response));
                            this.fire(&quot;template_loaded&quot;);
                        }
                    }
                });
            }

        },
        authenticated: function(user) { &#x2F;&#x2F;what happens when a view is called and
        },
        unauthenticated: function() {

        },
        altInitializer: function() {

        },
        requestView: function(view, config, callback) {


            this.sendRequest(&quot;view&quot;, {
                view: view,
                config: config || {}
            }, function(e) {

                if (e.view &amp;&amp; Lang.isFunction(callback)) {
                    callback.apply(this, [e.view]);
                }
            });
        },
        processModules: function(callback) {
            var c = this.get(&#x27;container&#x27;),
                self = this;
            c.all(&#x27;[data-module=enabled]&#x27;).each(function(item) {
                self.appendModule(item);
            });

        },
        appendModule: function(container, config, callback) {
            var modules = Y.config.AppConfig.modules,
                moduleName = container.getAttribute(&#x27;data-module-name&#x27;),
                module = modules[moduleName],
                self = this,
                providedConfig = config || {},
                moduleConfig, customConfig = container.getAttribute(&#x27;data-module-config&#x27;);

            if (modules[moduleName].customConfigs &amp;&amp; customConfig &amp;&amp; modules[moduleName].customConfigs[customConfig]) {
                Y.mix(providedConfig, modules[moduleName].customConfigs[customConfig]);
            }
            if (module &amp;&amp; module.view) {
                moduleConfig = module.config || {};
                Y.mix(providedConfig, moduleConfig);
                self.requestView(module.view, providedConfig, function(view) {
                    container.setHTML(view.render().get(&#x27;container&#x27;));
                    if (Lang.isFunction(callback)) {
                        callback.apply(this, [view, moduleName]);
                    }

                });

            }
            else {
                throw new Error(&quot;Could not load the module &quot; + moduleName);
            }
        },
        requestModel: function(modelName, callback, context) {
            var token = Math.random();
            Y.once(&quot;model_response:&quot; + token, function(e) {
                if (Lang.isFunction(callback)) {
                    callback.call(context || this, e.model);
                }
            });
            Y.fire(&quot;model_request&quot;, {
                modelName: modelName,
                token: token
            });
        }

    });


    &#x2F;**
     * The HeroUnit class represents a block that appears on the HomePage
     * @class HeroView
     * @extends View
     * @uses
     * @constructor
     * @cfg {object} configuration attributes
     *&#x2F;
    Y.HeroUnit = Y.Base.create(&#x27;HeroUnit&#x27;, Y.AshleshaBaseView, [], {
        containerTemplate: &#x27;&lt;DIV&#x2F;&gt;&#x27;,
        altInitializer: function() {

            this.get(&quot;container&quot;).setHTML(this.get(&quot;template&quot;).one(&quot;#herounit-template&quot;).getHTML());
            if (Lang.isFunction(jQuery)) {
                jQuery(this.get(&quot;container&quot;).getDOMNode()).carousel({
                    interval: 6000
                });
            }

        }
    });
    
    &#x2F;**
     * The AshleshaBaseModel class represents the base Model for our app
     * @class  AshleshaBaseModel
     * @extends Model
     * @uses
     * @constructor
     * @cfg {object} configuration attributes
     *&#x2F;
    Y.AshleshaBaseModel = Y.Base.create(&#x27;AshleshaBaseModel&#x27;, Y.Model, [], {
        idAttribute: &quot;_id&quot;,
        sync: function(action, options, callback) {
            var model_url = Y.config.AppConfig.baseURL + Y.config.AppConfig.modelURL,
                cache = new Y.CacheOffline(),
                cache_key, data, modelID;

            data = {
                data: Y.JSON.stringify(this.toJSON())
            }; &#x2F;&#x2F;send the data as string instead of set of key values this enables us to send objects and receive objects
            modelID = this.get(&quot;modelID&quot;) || this.name;
            cache_key = &quot;model:&quot; + modelID + &quot;:&quot; + data._id;
            switch (action) {
            case &quot;read&quot;:
                if (data._id &amp;&amp; cache.retrieve(cache_key)) {
                    callback(null, cache.retrieve(cache_key).response);
                }
                else {
                    Y.io(model_url + modelID + &quot;&#x2F;read&quot;, {
                        method: &quot;POST&quot;,
                        data: data,
                        on: {
                            success: function(i, o, a) {
                                var r = Y.JSON.parse(o.responseText);
                                if (r.success) {
                                    cache.add(cache_key, r.data);
                                    callback(null, r.data);

                                }
                                else {
                                    callback(r.errors || []);
                                }
                            },
                            failure: function() {
                                callback(&quot;Could not read data&quot;);
                            }
                        }
                    });
                }
                break;
            case &quot;create&quot;:

                Y.io(model_url + modelID + &quot;&#x2F;create&quot;, {
                    method: &quot;POST&quot;,
                    data: data,
                    on: {
                        success: function(i, o, a) {
                            var r = Y.JSON.parse(o.responseText);
                            if (r.success) {
                                cache.add(cache_key, r.data);
                                callback(null, r.data);
                            }
                            else {
                                callback(r.errors || []);
                            }

                        },
                        failure: function() {
                            callback(&quot;Could not save data&quot;);
                        }
                    }
                });


                break;
            case &quot;delete&quot;:
                Y.io(model_url + modelID + &quot;&#x2F;delete&quot;, {
                    method: &quot;POST&quot;,
                    data: data,
                    on: {
                        success: function(i, o, a) {
                            var r = Y.JSON.parse(o.responseText);
                            cache.add(cache_key, r);
                            callback(null, r.data);
                        },
                        failure: function() {
                            callback(&quot;Could not delete data&quot;);
                        }
                    }
                });
                break;
            case &quot;update&quot;:

                if (data._id) {
                    Y.io(model_url + modelID + &quot;&#x2F;update&quot;, {
                        method: &quot;POST&quot;,
                        data: data,
                        on: {
                            success: function(i, o, a) {
                                var r = Y.JSON.parse(o.responseText);
                                if (r.success) {
                                    cache.add(cache_key, r.data);
                                    callback(null, r.data);
                                }
                                else {
                                    callback(r.errors || []);
                                }
                            },
                            failure: function() {
                                callback(&quot;Could not save data&quot;);
                            }
                        }
                    });
                }
                else {
                    callback(&quot;Could not save data&quot;);
                }

                break;
            }
        }


    }, {
        ATTRS: {

            &quot;created_at&quot;: {
                value: &quot;&quot;
            },
            &quot;updated_at&quot;: {
                value: &quot;&quot;
            },
            &quot;author_id&quot;: {
                value: &quot;&quot;
            },
            &quot;type&quot;: {
                value: &quot;&quot;
            }
        }
    });

    &#x2F;**
     * The AshleshaLoginModel model is responsible for Login
     * @class  AshleshaBaseModel
     * @extends Model
     * @uses
     * @constructor
     * @cfg {object} configuration attributes
     *&#x2F;
    Y.AshleshaLoginModel = Y.Base.create(&#x27;AshleshaLoginModel&#x27;, Y.AshleshaBaseModel, [], {

        validate: function(attrs) {
            if (!attrs.username || !attrs.password) {
                return &quot;Username and Password both must be provided!&quot;;
            }
            if (attrs.username.length &lt; 3) {
                return &quot;We dont allow that small Username&quot;;
            }
            if (attrs.password.length &lt; 6) {
                return &quot;Passwords less than 6 characters are not allowed&quot;;
            }
        }
    }, {
        ATTRS: {
            username: {

            },
            password: {

            },
            authenticated: {
                value: false
            }
        }
    });







    &#x2F;**
     * The AshleshaCurrentUserModel model is the current user model which means it will fetch all the information of the current user only.
     * This model can not be used to fetch any other user&#x27;s details.
     * @class  AshleshaBaseModel
     * @extends Model
     * @uses
     * @constructor
     * @cfg {object} configuration attributes
     *&#x2F;
    Y.AshleshaCurrentUserModel = Y.Base.create(&#x27;AshleshaCurrentUserModel&#x27;, Y.AshleshaBaseModel, [], {
        hasRole: function(role) {
            var roles = this.get(&quot;roles&quot;);
            if (roles &amp;&amp; roles.indexOf(role) &gt; -1) {
                return true;
            }
            return false;
        }

    }, {
        ATTRS: {


        }
    });

    &#x2F;**
     * The LoginView module renders a login box. Currently it does not support OpenID based logins
     * @class HeroView
     * @extends View
     * @uses
     * @constructor
     * @cfg {object} configuration attributes
     *&#x2F;
    Y.LoginView = Y.Base.create(&#x27;LoginView&#x27;, Y.AshleshaBaseView, [], {
        containerTemplate: &#x27;&lt;DIV&#x2F;&gt;&#x27;,
        unauthenticated: function() {
            var c = this.get(&quot;container&quot;),
                token = Math.random();
            c.setHTML(this.get(&quot;template&quot;).one(&quot;#login-template&quot;).getHTML());
            Y.on(&quot;auth_response:&quot; + token, function(e) {
                if (!e.authenticated) {
                    c.one(&#x27;.alert-error&#x27;).removeClass(&#x27;hide&#x27;);
                    c.one(&#x27;.alert-error&#x27;).setHTML(e.error);
                }
                else {
                    c.one(&#x27;.alert-success&#x27;).removeClass(&#x27;hide&#x27;);
                }

            }, this);
            c.one(&quot;button.login&quot;).on(&quot;click&quot;, function(e) {
                c.one(&#x27;.alert&#x27;).addClass(&#x27;hide&#x27;);
                Y.fire(&quot;auth_request&quot;, {
                    username: c.one(&quot;#username&quot;).get(&quot;value&quot;),
                    password: c.one(&quot;#password&quot;).get(&quot;value&quot;),
                    token: token
                });
            }, this);

        }
    });


    &#x2F;**
     *
     * AshleshaSignUpModel is created to let users signup or to create new users. It requires the config attributes for validation functions
     * @class  AshleshaBaseModel
     * @extends Model
     * @uses
     * @constructor
     * @cfg {object} configuration attributes
     *&#x2F;
    Y.AshleshaSignUpModel = Y.Base.create(&#x27;AshleshaSignUpModel&#x27;, Y.AshleshaBaseModel, [], {
        remoteValidate: function() { &#x2F;&#x2F;Function for which we wish to call remote validator
        },
        validate: function(attrs) {

            var vfs = Y.config.AppConfig.validations,
                i, error = null,
                errors = [];
            for (i in attrs) {
                if (Lang.isFunction(vfs[i])) {
                    error = vfs[i].apply(this, [attrs[i]]);
                    if (error) {
                        errors.push({ &#x2F;&#x2F;return all the errors we returns all the errors as a an array
                            label: i,
                            error: error
                        });
                    }
                }
            }
            if (errors.length &gt; 0) {
                return errors;
            }

        }
    }, {
        ATTRS: {
            username: {
                value: &#x27;&#x27;
            },
            password: {
                value: &#x27;&#x27;
            },
            fullname: {
                value: &#x27;&#x27;
            },
            email: {
                value: &#x27;&#x27;
            },
            gender: {
                value: &#x27;&#x27;
            },
            type: {
                value: &#x27;&#x27;
            }

        }
    });

    &#x2F;**
     * The LoginView module renders a login box. Currently it does not support OpenID based logins
     * @class HeroView
     * @extends View
     * @uses
     * @constructor
     * @cfg {object} configuration attributes
     *&#x2F;
    Y.SignUpView = Y.Base.create(&#x27;SignUpView&#x27;, Y.AshleshaBaseView, [], {
        containerTemplate: &#x27;&lt;DIV&#x2F;&gt;&#x27;,
        altInitializer: function() {
            var model = new Y.AshleshaSignUpModel(),
                c = this.get(&quot;container&quot;),
                t = this.get(&quot;template&quot;);
            this.set(&quot;model&quot;, model);
            c.setHTML(t.one(&quot;#signup-template&quot;).getHTML());
            model.on(&#x27;error&#x27;, this.errorHandler, this);
            model.on(&#x27;save&#x27;, this.success, this);
            c.one(&#x27;#signup-form-submit&#x27;).on(&#x27;click&#x27;, function() {
                model.setAttrs({
                    username: c.one(&quot;#username&quot;).get(&quot;value&quot;),
                    password: c.one(&quot;#password&quot;).get(&quot;value&quot;),
                    email: c.one(&quot;#email&quot;).get(&quot;value&quot;),
                    fullname: c.one(&quot;#fullname&quot;).get(&quot;value&quot;),
                    gender: c.one(&quot;[name=gender]:checked&quot;).get(&quot;value&quot;)
                });
                c.all(&quot;.control-group&quot;).removeClass(&#x27;error&#x27;);
                c.all(&quot;.help-inline&quot;).setHTML(&quot;&quot;);
                model.save();
            }, this);

        },
        errorHandler: function(e) {
            var c = this.get(&#x27;container&#x27;);
            if (e.error &amp;&amp; Lang.isArray(e.error)) {
                Y.Array.each(e.error, function(item) {
                    var input = c.one(&quot;#&quot; + item.label),
                        cg;
                    if (input) {
                        cg = input.ancestor(&quot;.control-group&quot;);
                        if (cg) {
                            cg.addClass(&#x27;error&#x27;);
                            if (cg.one(&quot;.help-inline&quot;)) {
                                cg.one(&quot;.help-inline&quot;).setHTML(item.error);
                            }

                        }
                    }
                });
            }
            c.all(&quot;input&quot;).each(function(item) {
                var cg;
                if (e.error.label === item.get(&quot;id&quot;)) {
                    cg = item.ancestor(&quot;.control-group&quot;);
                    if (cg) {
                        cg.addClass(&#x27;error&#x27;);
                        if (cg.one(&quot;.help-inline&quot;)) {
                            cg.one(&quot;.help-inline&quot;).setHTML(e.error.error);
                        }

                    }
                }
            });
        },
        success: function() {
            var m = this.get(&quot;model&quot;);
            Y.fire(&quot;auth_request&quot;, {
                username: m.get(&quot;username&quot;),
                password: m.get(&quot;password&quot;)
            });
        }
    });

    &#x2F;**
     * The TopBarView class represents the view of the main page. For an unauthenticatd user this would be a signup page.
     * @class TopBarView
     * @extends View
     * @uses WidgetParent
     * @constructor
     * @cfg {object} configuration attributes
     *&#x2F;
    Y.TopBarView = Y.Base.create(&#x27;TopBarView&#x27;, Y.AshleshaBaseView, [], {
        authenticated: function(user) {
            var c = this.get(&#x27;container&#x27;);
            c.setHTML(Lang.sub(this.get(&#x27;template&#x27;).one(&quot;#topbar-authenticated&quot;).getHTML(), {
                LOGO: Y.config.AppConfig.baseURL + Y.config.AppConfig.logoImage
            }));
            this.processModules();
        },
        unauthenticated: function() {
            var c = this.get(&#x27;container&#x27;);
            c.setHTML(Lang.sub(this.get(&#x27;template&#x27;).one(&quot;#topbar-unauthenticated&quot;).getHTML(), {
                LOGO: Y.config.AppConfig.baseURL + Y.config.AppConfig.logoImage
            }));

        }
    });


    &#x2F;**
     * The AshleshaSideBarModel model is responsible for Login
     * @class  AshleshaSideBarModel
     * @extends Model
     * @uses
     * @constructor
     * @cfg {object} configuration attributes
     *&#x2F;
    Y.AshleshaSideBarModel = Y.Base.create(&#x27;AshleshaSideBarModel&#x27;, Y.AshleshaBaseModel, [], {});


    &#x2F;**
     * The SideBarView is the sidebar of our application of course it will be present only for the signed in users.
     * @class SideBarView
     * @extends View
     * @uses View, Model
     * @constructor
     * @cfg {object} configuration attributes
     *&#x2F;
    Y.SideBarView = Y.Base.create(&#x27;SideBarView&#x27;, Y.AshleshaBaseView, [], {
        authenticated: function(user) {
            var c = this.get(&#x27;container&#x27;),
                model;
            c.setHTML(this.get(&#x27;template&#x27;).one(&#x27;#sidebar-authenticated&#x27;).getHTML());
            model = new Y.AshleshaSideBarModel({
                user: user.get(&quot;_id&quot;)
            });
            model.on(&#x27;load&#x27;, function() {
                var list = c.one(&quot;.nav-list&quot;);
                list.setHTML(&#x27;&#x27;);
                Y.Object.each(model.get(&#x27;items&#x27;) || [], function(item, index) {
                    list.append(Lang.sub(&#x27;&lt;li class=&quot;nav-header&quot;&gt;{LABEL}&lt;&#x2F;li&gt;&#x27;, {
                        LABEL: index
                    }));
                    Y.Object.each(item, function(links, link_text) {
                        list.append(Lang.sub(&#x27;&lt;li&gt;&lt;a href=&quot;{LINK}&quot;&gt;{LABEL}&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;&#x27;, {
                            LINK: links,
                            LABEL: link_text
                        }));
                    });
                });
            }, this);
            model.load();

        },
        unauthenticated: function() {
            var c = this.get(&#x27;container&#x27;);
            c.addClass(&#x27;hide&#x27;);

        }
    });

    &#x2F;**
     * The MainMessageView is the place where you give messages to the users.
     * @class MainMessageView
     * @extends View
     * @uses View, Model
     * @constructor
     * @cfg {object} configuration attributes
     *&#x2F;
    Y.MainMessageView = Y.Base.create(&#x27;MainMessageView&#x27;, Y.AshleshaBaseView, [], {
        altInitializer: function(user) {
            var c = this.get(&#x27;container&#x27;),
                model;
            model = new Y.AshleshaBaseModel({ &#x2F;&#x2F;create Main Message model
                modelID: &#x27;MainMessageModel&#x27;
            });
            model.on(&#x27;load&#x27;, function() {
                c.setHTML(Lang.sub(this.get(&#x27;template&#x27;).one(&quot;#mainmessage-template&quot;).getHTML(), {
                    MESSAGE: model.get(&quot;message&quot;)
                }));
                this.processModules();
            }, this);
            model.load();

        }
    });



    &#x2F;**
     * The HomeView class represents the view of the main page. For an unauthenticatd user this would be a signup page.
     * @class HomeView
     * @extends View
     * @uses WidgetParent
     * @constructor
     * @cfg {object} configuration attributes
     *&#x2F;
    Y.HomeView = Y.Base.create(&#x27;HomeView&#x27;, Y.AshleshaBaseView, [], {
        authenticated: function(user) {
            var c = this.get(&#x27;container&#x27;),
                t = this.get(&#x27;template&#x27;),
                action = this.get(&#x27;action&#x27;),
                actionHandler;
            c.setHTML(t.one(&quot;#outer&quot;).getHTML());
            c.one(&quot;#maincontainer&quot;).setHTML(t.one(&quot;#main&quot;).getHTML());
            this.processModules();
            if (action) {
                this.actionHandler(action);
            }
        },
        unauthenticated: function() { &#x2F;&#x2F;keep this method Synchronous
            var c = this.get(&#x27;container&#x27;),
                t = this.get(&#x27;template&#x27;);
            if (t.one(&quot;#outer&quot;) &amp;&amp; t.one(&quot;#unsigned-main&quot;)) {
                try {
                    c.setHTML(t.one(&quot;#outer&quot;).getHTML());
                    c.one(&quot;#maincontainer&quot;).setHTML(t.one(&quot;#unsigned-main&quot;).getHTML());
                    this.processModules();
                } catch (ex) {
                    Y.log(ex);
                }


            }

        },
        actionHandler: function(e) {
            var c = this.get(&#x27;container&#x27;),
                actions = Y.config.AppConfig.actions,
                action = e.action,
                module = e.module,
                container, views = actions[module][action]; &#x2F;&#x2F;fetch the config from the Global configuration
            if (module &amp;&amp; action &amp;&amp; actions[module] &amp;&amp; actions[module][action]) {
                Y.Array.each(views, function(item) {
                    container = c.one(Lang.sub(&quot;[data-action-holder={CONTAINER}]&quot;, {
                        CONTAINER: item.container
                    }));
                    if (container) {
                        container.setAttribute(&quot;data-module-name&quot;, item.module);
                        this.appendModule(container, actions[module][action].config);
                    }
                }, this);

            }

        }
    });

    &#x2F;**
     * The this view shows the post cosole for a user. Use can create, update, delete his posts. Publish them as public or publish them to various streams.
     * @class PostsView
     * @extends View
     * @uses WidgetParent
     * @constructor
     * @cfg {object} configuration attributes
     *&#x2F;
    Y.PostsView = Y.Base.create(&#x27;PostsView&#x27;, Y.HomeView, [], {
        authenticated: function(user) {
            Y[this.name].superclass.authenticated.call(this, user); &#x2F;&#x2F;Call the superclass method            
        },
        unauthenticated: function() {

        }
    });

    &#x2F;**
     * The ToolBarView is used to render toolbars
     * @class ToolBarView
     * @extends View
     * @uses
     * @constructor
     * @cfg {object} configuration attributes
     *&#x2F;
    Y.ToolBarView = Y.Base.create(&#x27;ToolBarView&#x27;, Y.AshleshaBaseView, [], {
        authenticated: function() {

            var c = this.get(&#x27;container&#x27;),
                btnConfig = this.get(&quot;btnConfig&quot;),
                n, t = this.get(&#x27;template&#x27;);
            c.setHTML(t.one(&quot;#toolbar-authenticated&quot;).getHTML());
            if (btnConfig &amp;&amp; Lang.isArray(btnConfig)) {
                var toolbar = c.one(&#x27;.toolbar&#x27;);
                Y.Array.each(btnConfig, function(item) {
                    n = Y.Node.create(Lang.sub(t.one(&quot;#toolbar-button&quot;).getHTML(), {
                        PATH: item.link,
                        LABEL: item.label,
                        CLASSES: item.classes || &#x27;&#x27;,
                        ICON: item.icon

                    }));
                    toolbar.append(&quot;&amp;nbsp;&quot;);
                    toolbar.append(n); &#x2F;&#x2F;Every button must be separate by a space
                });
            }
        },
        unauthenticated: function() {

        }
    });


    &#x2F;**
     * The CreateItemView is a special view that renders forms based on the configuration properties provided.
     * It is also responsible for validation and submission
     * @class CreateItemView
     * @extends View
     * @uses
     * @constructor
     * @cfg {object} configuration attributes
     *&#x2F;
    Y.CreateItemView = Y.Base.create(&#x27;CreateItemView&#x27;, Y.AshleshaBaseView, [], {
        events: {
            &quot;form&quot;: {
                &quot;submit&quot;: &quot;submitForm&quot;
            }
        },
        authenticated: function() {
            var c = this.get(&#x27;container&#x27;),
                t = this.get(&quot;template&quot;),
                strLabels = this.get(&quot;strLabels&quot;) || {
                    title: &quot;Create&quot;,
                    submit: &quot;Create&quot;
                };
            c.setHTML(Lang.sub(t.one(&quot;#createitem-template&quot;).getHTML(), {
                TITLE: strLabels.title,
                SUBMIT: strLabels.submit
            }));
            this.processModules();
        },
        submitForm: function(e) {
            var model = new Y.AshleshaBaseModel(this.get(&quot;modelConfig&quot;) || {}),
                c = this.get(&#x27;container&#x27;),
                viewByKey = {};
            e.halt();
            this.fire(&quot;wait:start&quot;, {
                target: e.target
            }); &#x2F;&#x2F;disable the buttons
            c.all(&#x27;[data-model-key]&#x27;).each(function(item) {
                var view = Y.View.NodeMap.getByNode(item),
                    key = view.get(&quot;modelKey&quot;);
                model.addAttr(key);
                model.set(key, view.get(&quot;value&quot;));
                viewByKey[key] = view;
                view.clearError();
            });
            model.validate = function(attrs) { &#x2F;&#x2F;Overrride the validate method
                var i, errors = [],
                    vrules = Y.config.AppConfig.validations,
                    f, rule;
                for (i in attrs) {

                    if (viewByKey[i]) {
                        rule = viewByKey[i].get(&quot;validate&quot;);
                        f = vrules[rule];
                        if (Lang.isFunction(f) &amp;&amp; f(attrs[i], i)) {
                            errors.push({
                                key: i,
                                error: Y.AshleshaUtils.toTitleCase(i) + &quot; is &quot; + rule
                            });
                        }
                    }


                }
                if (errors.length &gt; 0) {
                    return errors;
                }
            };
            model.on(&quot;error&quot;, function(m) {
                var errors = m.error,
                    i;
                Y.Array.each(errors, function(item) {
                    viewByKey[item.key].addError(item.error);
                });
                this.fire(&quot;wait:end&quot;, {
                    target: e.target
                });
            }, this);
            model.on(&quot;save&quot;, function(m) {
                this.fire(&quot;wait:end&quot;, {
                    target: e.target
                });
            }, this);
            model.save();

        }
    });



    &#x2F;**
     * The TextBoxView is a simple textbox form control :)
     * @class TextBoxView
     * @extends View
     * @uses
     * @constructor
     * @cfg {object} configuration attributes
     *&#x2F;
    Y.TextBoxView = Y.Base.create(&#x27;TextBoxView&#x27;, Y.AshleshaBaseView, [Y.View.NodeMap], {
        altInitializer: function() {

            var c = this.get(&#x27;container&#x27;),
                t = this.get(&#x27;template&#x27;);
            c.setHTML(Lang.sub(t.one(&quot;#&quot; + this.name.toLowerCase() + &quot;-template&quot;).getHTML(), {
                LABEL: this.get(&quot;label&quot;),
                PLACEHOLDER: this.get(&quot;placeholder&quot;) || &quot;&quot;,
                NAME: this.get(&quot;name&quot;) || this.name,
                MODEL_KEY: this.get(&quot;modelKey&quot;),
                HELPTEXT: this.get(&quot;helptext&quot;) || &quot;&quot;
            }));

        },
        addError: function(error) {
            var c = this.get(&#x27;container&#x27;);
            c.one(&quot;.control-group&quot;).addClass(&#x27;error&#x27;);
            c.one(&quot;.help-block&quot;).setHTML(error);
        },
        clearError: function() {
            var c = this.get(&#x27;container&#x27;);
            c.one(&quot;.control-group&quot;).removeClass(&#x27;error&#x27;);
            c.one(&quot;.help-block&quot;).setHTML(&#x27;&#x27;);
        }
    }, {
        ATTRS: {
            value: {
                getter: function(val, name) {
                    return this.get(&#x27;container&#x27;).one(&quot;input[type=text]&quot;).get(&quot;value&quot;);
                },
                setter: function(val, name) {
                    this.get(&#x27;container&#x27;).one(&quot;input[type=text]&quot;).set(&quot;value&quot;, val);
                }

            }
        }
    });

    &#x2F;**
     * The TextAreaView is a simple textbox form control :)
     * @class TextAreaView
     * @extends View
     * @uses
     * @constructor
     * @cfg {object} configuration attributes
     *&#x2F;
    Y.TextAreaView = Y.Base.create(&#x27;TextAreaView&#x27;, Y.TextBoxView, [], {
        altInitializer: function() {
            var c = this.get(&#x27;container&#x27;),
                textarea;
            Y[this.name].superclass.altInitializer.apply(this, arguments);
            textarea = c.one(&quot;textarea&quot;);
            if (textarea) {
                this.expandToFit(textarea); &#x2F;&#x2F;will ensure that textare expands
            }
        },
        expandToFit: function(r) {
            var f = function() {
                var c, targetHeight;
                c = Y.Node.create(&quot;&lt;div&#x2F;&gt;&quot;);
                c.addClass(&quot;textarea&quot;);
                c.setStyle(&quot;width&quot;, r.getComputedStyle(&quot;width&quot;));
                c.setStyle(&quot;display&quot;, &quot;block&quot;);
                c.setContent(&quot;&lt;pre&gt;&quot; + r.get(&quot;value&quot;) + &quot;&lt;&#x2F;pre&gt;&quot;);
                c.setStyle(&quot;position&quot;, &quot;absolute&quot;);
                c.setStyle(&quot;z-index&quot;, &quot;-20&quot;);
                Y.one(&quot;body&quot;).append(c);
                targetHeight = c.getComputedStyle(&#x27;height&#x27;);
                r.setStyle(&quot;height&quot;, targetHeight);
                c.setStyle(&quot;display&quot;, &quot;none&quot;);
                c.remove();

            };
            r.on([&quot;change&quot;, &quot;keyup&quot;], f);
            f();
        }
    }, {
        ATTRS: {
            value: {
                getter: function(val, name) {
                    return this.get(&#x27;container&#x27;).one(&quot;textarea&quot;).get(&quot;value&quot;);
                },
                setter: function(val, name) {
                    this.get(&#x27;container&#x27;).one(&quot;textarea&quot;).set(&quot;value&quot;, val);
                }
            }
        }
    });

    Y.AshleshaUtils = {};

    Y.AshleshaUtils.toTitleCase = function(str) {
        var tokens = str.split(&quot; &quot;),
            s;
        Y.Array.each(tokens, function(item, index, arr) {
            tokens[index] = item.charAt(0).toUpperCase() + item.substr(1).toLowerCase();
        });
        return tokens.join(&quot; &quot;);
    };

}, &#x27;0.99&#x27;, {
    requires: [&#x27;event-custom&#x27;, &#x27;view-node-map&#x27;, &#x27;router&#x27;, &#x27;app-base&#x27;, &#x27;app-transitions&#x27;, &#x27;node&#x27;, &#x27;event&#x27;, &#x27;json&#x27;, &#x27;cache&#x27;, &#x27;model&#x27;, &#x27;model-list&#x27;, &#x27;querystring-stringify-simple&#x27;, &#x27;view&#x27;, &#x27;querystring-stringify-simple&#x27;, &#x27;io-upload-iframe&#x27;, &#x27;io-form&#x27;, &#x27;io-base&#x27;, &#x27;sortable&#x27;],
    skinnable: false
});

    </pre>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="..&#x2F;assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="..&#x2F;assets/js/yui-prettify.js"></script>
<script src="..&#x2F;assets/../api.js"></script>
<script src="..&#x2F;assets/js/api-filter.js"></script>
<script src="..&#x2F;assets/js/api-list.js"></script>
<script src="..&#x2F;assets/js/api-search.js"></script>
<script src="..&#x2F;assets/js/apidocs.js"></script>
</body>
</html>
